{% extends "app/base.html" %}

{% block title %}{{v.title}}{% endblock %}

{% block content %}
    {% load pretty_date %}
    <!-- Main Content -->
    <div class="large-8 columns" role="content">
      <article>
        <div class="flex-video widescreen">{{ v.player | safe }}</iframe></div>
        <h3 id="video_title" video_id="{{ v.video_id }}">{{ v.title }}</h3>

        <small>Published on {{ v.publishedAt | pretty_date }}</small>
        <div><small>{{ v.description }}</small></div>
      </article>

      <hr/>
      {% csrf_token %}

      <div id="comments">
      {% for c in comments %}
        {% include "app/commentRow.html" %}
        <hr/>
      {% endfor %}
      </div>

      <a href id="moreComments" class="button expand secondary tiny loading-icon" disabled>Loading ...</a>
    </div>
    <!-- End Main Content -->

    <!-- Sidebar -->
    <aside class="large-4 columns">
      <div id="summary" class="panel">
        <h4>Summary</h4>
        {% include "app/commonSummary.html" %}

        {% if spam_count < 10 or ham_count < 10 %}
        <a href="classify?v={{ v.video_id }}" id="classify-button" class="button expand tiny" disabled>Classify</a>
        {% else %}
        <a href="classify?v={{ v.video_id }}" id="classify-button" class="button expand tiny">Classify</a>
        {% endif %}
        <button class="tiny" id="hide-spam-button" action="hide">Hide spam</button>
      </div>
    </aside>
    <!-- End Sidebar -->
{% endblock %}

{% block js %}
  <!-- JS (Placed at the end of the document so the pages load faster) -->
  {% load staticfiles %}
  <script src="{% static 'app/js/vendor/jquery.js' %}"></script>
  <script src="{% static 'app/js/vendor/fastclick.js' %}"></script>
  <script src="{% static 'app/js/vendor/jquery.cookie.js' %}"></script>
  <script src="{% static 'app/js/foundation.min.js' %}"></script>
  <script src="{% static 'app/js/base.js' %}" type="text/javascript"></script>
  <script src="{% static 'app/js/watch.js' %}" type="text/javascript"></script>
  <script>
    $(document).foundation();
  </script>
{% endblock %}
