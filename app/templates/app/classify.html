{% extends "app/base.html" %}

{% block title %}{% endblock %}

{% block content %}
    <!-- Main Content -->
    <div class="large-8 columns" role="content">
      <article>
        <h3 id="video_title" video_id="{{ video_id }}">Loading...</h3>

        <small id="video_publish_date"></small>
        <p id="video_content"></p>
      </article>

      <hr />
      {% csrf_token %}

    {% if len_error %}
      <p>At least 10 tagged spam and 10 tagged ham are needed!</p>
    {% else %}
      {% for c in comments %}
      <div class="comment row" tagType="manual" comment_id="{{ c.id }}">
        <p class="content small-9 columns">{{ c.content }}</p>
        <div class="small-3 columns">
        {% if c.tag %}
          <span class="comment_tag right tiny secondary button alert spam" disabled tag="spam">Spam</span>
          <span class="comment_tag right tiny secondary button ham" tag="ham">Ham</span>
        {% else %}
          <span class="comment_tag right tiny secondary button spam" tag="spam">Spam</span>
          <span class="comment_tag right tiny secondary button success ham" disabled tag="ham">Ham</span>
        {% endif %}
        </div>
      </div>
      <hr/>
      {% endfor %}

      <h3>Prediction</h3>
      <hr/>

      {% for c, p in prediction %}
      <div class="comment row" tagType="manual" comment_id="{{ c }}">
        <p class="content small-9 columns">{{ c }}</p>
        <div class="small-3 columns">
        {% if p %}
          <span class="comment_tag right tiny secondary button alert spam" disabled tag="spam">Spam</span>
          <span class="comment_tag right tiny secondary button ham" tag="ham">Ham</span>
        {% else %}
          <span class="comment_tag right tiny secondary button spam" tag="spam">Spam</span>
          <span class="comment_tag right tiny secondary button success ham" disabled tag="ham">Ham</span>
        {% endif %}
        </div>
      </div>
      <hr/>
      {% endfor %}

    {% endif %}
    </div>
    <!-- End Main Content -->

    <!-- Sidebar -->
    <aside class="large-4 columns">
      <div id="summary" class="panel">
        <h4>Summary</h4>
        <div>
          <strong># views:</strong> <span id="viewCount">0</span>
        </div>

        <div>
          <strong># comments:</strong> <span id="commentCount">0</span>
          <small>The actual count of comments may differ because, since November 2013, shares on Google+ are counted as comments.</small>
        </div>

        <div>
          <strong># tagged comments:</strong>
          <span id="taggedCount">0</span>
        </div>

        <div>
          <strong># tagged spam:</strong>
          <span id="spamCount">0</span>
        </div>

        <div>
          <strong># tagged ham:</strong>
          <span id="hamCount">0</span>
        </div>
      {% if not len_error %}
        <div><strong>Classifier:</strong> LinearSVC (c: {{ clf.get_params.C|floatformat:-5 }})</div>

        <div>
          <strong>Accuracy:</strong> {{ acc|floatformat:2 }}% &#177; {{ stddev|floatformat:2 }}
        </div>
      {% endif %}
        <a href="watch?v={{ video_id }}" class="button expand tiny">Back to video</a>
      </div>
    </aside>
    <!-- End Sidebar -->
{% endblock %}

{% block js %}
  <!-- JS (Placed at the end of the document so the pages load faster) -->
  {% load staticfiles %}
  <script src="{% static 'app/js/vendor/jquery.js' %}"></script>
  <script src="{% static 'app/js/vendor/jquery.cookie.js' %}"></script>
  <script src="{% static 'app/js/foundation.min.js' %}"></script>
  <script src="{% static 'app/js/watch.js' %}" type="text/javascript"></script>
{% endblock %}
